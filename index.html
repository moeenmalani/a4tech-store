<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>A4Tech Bloody Store</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
:root{
  --primary:#00AEEF;--secondary:#25D366;--accent:#FF6B35;
  --dark:#2C3E50;--light:#F8F9FA;--card:white;--text:#2C3E50;
}
body.dark{--light:#1E1E1E;--card:#2C2C2C;--text:#F8F9FA;background:var(--light);color:var(--text);transition:0.3s}
body{background:var(--light);color:var(--text);transition:0.3s;line-height:1.6}
.container{max-width:1100px;margin:0 auto;padding:0 20px}

/* Header */
header{background:linear-gradient(135deg,var(--primary),#0088CC);color:white;padding:15px 0;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
.header-inner{display:flex;justify-content:space-between;align-items:center}
header h1{font-size:1.8rem;font-weight:700}
header .header-buttons{display:flex;gap:10px}
header button{background:white;color:var(--primary);border:none;padding:8px 12px;border-radius:6px;font-weight:600;cursor:pointer;transition:0.3s}
header button:hover{background:var(--primary);color:white}

/* Brand & Search */
.brand-search-row{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;margin:25px 0 10px}
.brands{display:flex;flex-wrap:wrap;gap:10px}
.brand-btn{padding:10px 20px;border:none;border-radius:8px;background:white;color:var(--dark);font-weight:600;cursor:pointer;transition:0.3s;box-shadow:0 3px 6px rgba(0,0,0,0.1)}
.brand-btn.active{background:var(--primary);color:white}

/* Search Bar */
#searchBox{padding:10px 14px;border-radius:8px;border:1px solid #ccc;min-width:220px;box-shadow:0 3px 6px rgba(0,0,0,0.1);font-size:0.95rem}
#searchBox:focus{outline:none;border-color:var(--primary)}

/* Categories */
.categories{display:flex;justify-content:center;flex-wrap:wrap;gap:15px;margin:15px 0 10px}
.category-btn{padding:10px 20px;border:none;border-radius:8px;background:white;color:var(--dark);font-weight:600;cursor:pointer;transition:0.3s;box-shadow:0 3px 6px rgba(0,0,0,0.1)}
.category-btn.active{background:var(--secondary);color:white}

/* Products */
.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin:20px 0;transition:0.3s}
.products-grid.list-view{display:block}
.products-grid.list-view .product-card{display:flex;align-items:center;gap:10px}
.products-grid.list-view .product-image{display:none}
.product-card{background:var(--card);border-radius:12px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,0.1);transition:0.3s;display:flex;flex-direction:column}
.product-card:hover{transform:translateY(-4px)}
.product-image{width:100%;height:200px;object-fit:cover}
.product-info{padding:15px;display:flex;flex-direction:column;gap:6px}
.product-title{font-size:1.1rem;font-weight:600}
.product-description{font-size:0.9rem;color:#6C757D}
.product-price{font-weight:700;color:var(--secondary)}
.add-to-cart{background:var(--secondary);color:white;border:none;padding:8px 12px;border-radius:8px;font-weight:600;cursor:pointer;transition:0.3s}
.add-to-cart:hover{background:#128C7E}

/* Cart */
.cart-section{background:var(--card);padding:20px;border-radius:12px;margin:30px 0;box-shadow:0 6px 20px rgba(0,0,0,0.1)}
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #ddd;gap:10px}
.cart-item-image{width:60px;height:60px;object-fit:cover;border-radius:8px}
.cart-total{display:flex;justify-content:space-between;font-weight:700;margin-top:10px}
.checkout-btn{background:var(--primary);color:white;border:none;padding:12px;border-radius:10px;width:100%;font-weight:600;margin-top:10px}
.checkout-btn:hover{background:#0088CC}

/* Cart Quantity Controls */
.qty-controls{display:flex;align-items:center;gap:6px}
.qty-btn{width:28px;height:28px;border-radius:6px;border:1px solid #ddd;background:white;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}
.delete-btn{background:none;border:none;color:#ff4d4f;cursor:pointer;font-size:1.1rem}

/* Header Cart Icon */
#cartIcon{display:none;position:relative}
#cartIcon .count{position:absolute;top:-8px;right:-8px;background:#ff4d4f;color:white;border-radius:50%;padding:2px 6px;font-size:0.8rem}

/* Responsive */
@media(max-width:700px){
  .brand-search-row{flex-direction:column;align-items:flex-start;gap:10px}
}
</style>
</head>
<body>

<header>
  <div class="container header-inner">
    <h1>A4Tech Bloody Store</h1>
    <div class="header-buttons">
      <button id="themeBtn"><i class="fas fa-moon"></i></button>
      <button id="viewBtn"><i class="fas fa-list"></i></button>
      <button id="cartIcon"><i class="fas fa-shopping-cart"></i><span class="count" id="cartCount">0</span></button>
      <button id="openAdminBtn"><i class="fas fa-user-shield"></i></button>
    </div>
  </div>
</header>

<div class="container">

  <div class="brand-search-row">
    <div class="brands" id="brandsContainer">
      <button class="brand-btn active" data-brand="All">All</button>
      <!-- dynamic brand buttons -->
    </div>
    <input type="text" id="searchBox" placeholder="Search products...">
  </div>

  <div class="categories" id="categories"></div>
  <div class="products-grid" id="productsGrid"></div>

  <div class="cart-section" id="cartSection">
    <h2>Your Cart</h2>
    <div id="cartItems">Your cart is empty</div>
    <div class="cart-total"><span>Total:</span><span id="cartTotal">Rs. 0.00</span></div>
    <button class="checkout-btn" id="checkoutBtn"><i class="fab fa-whatsapp"></i> Checkout</button>
  </div>

  <!-- Admin modal etc. will come here (unchanged) -->

<script>
/* ===== ADMIN PASSWORD ===== */
const ADMIN_PASSWORD = "2214721";

/* ===== Demo data ===== */
let products = [
  {id:1,name:"M90 ANC Earphones",price:9340,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400",description:"High-quality ANC earphones",brand:"A4Tech",category:"Audio"},
  {id:2,name:"M70 Gaming Mouse",price:8470,image:"https://images.unsplash.com/photo-1527814050087-3793815479db?w=400",description:"Gaming mouse",brand:"A4Tech",category:"Mouse"},
  {id:3,name:"B1700 Combo Pack",price:6900,image:"https://images.unsplash.com/photo-1541140532154-b024d705b90a?w=400",description:"Keyboard + Mouse combo",brand:"A4Tech",category:"Keyboard"},
  {id:4,name:"Bloody Headphones",price:8800,image:"https://images.unsplash.com/photo-1585298723682-7115561c51b7?w=400",description:"Gaming headset",brand:"Bloody",category:"Audio"},
  {id:5,name:"BP-45 Mouse Pad",price:1380,image:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=400",description:"Waterproof Mouse Pad",brand:"Bloody",category:"Mousepad"}
];
let brands = ["All","A4Tech","Bloody"];
let categories = {
  "A4Tech":["Audio","Mouse","Keyboard"],
  "Bloody":["Audio","Keyboard","Mousepad"]
};
let cart = [];
let currentBrand="All",currentCategory="All",isList=false;

/* ====== Elements ====== */
const grid=document.getElementById("productsGrid");
const brandsContainer=document.getElementById("brandsContainer");
const categoriesContainer=document.getElementById("categories");
const cartItems=document.getElementById("cartItems");
const cartTotal=document.getElementById("cartTotal");
const cartIcon=document.getElementById("cartIcon");
const cartCount=document.getElementById("cartCount");
const cartSection=document.getElementById("cartSection");
const searchBox=document.getElementById("searchBox");

/* ===== Render functions ===== */
function renderBrands(){
  brandsContainer.innerHTML='<button class="brand-btn '+(currentBrand=="All"?"active":"")+'" data-brand="All">All</button>'+
    brands.filter(b=>b!=="All").map(b=>`<button class="brand-btn ${b===currentBrand?"active":""}" data-brand="${b}">${b}</button>`).join("");
}
function renderCategories(){
  if(currentBrand==="All"){categoriesContainer.innerHTML="";return;}
  const list=categories[currentBrand]||[];
  categoriesContainer.innerHTML=list.map(c=>`<button class="category-btn ${c===currentCategory?"active":""}" data-cat="${c}">${c}</button>`).join("");
}
function renderProducts(){
  let list=products.slice();
  if(currentBrand!=="All") list=list.filter(p=>p.brand===currentBrand);
  if(currentCategory!=="All") list=list.filter(p=>p.category===currentCategory);
  const term=searchBox.value.trim().toLowerCase();
  if(term) list=list.filter(p=>p.name.toLowerCase().includes(term)||p.description.toLowerCase().includes(term));
  if(list.length===0){grid.innerHTML='<div style="text-align:center;padding:40px;color:#777"><i class="fas fa-box-open"></i><div>No products found</div></div>';return;}
  if(isList){
    grid.classList.add("list-view");
    grid.innerHTML=`<table style="width:100%;border-collapse:collapse">
      <tr style="background:var(--primary);color:white;text-align:left">
        <th style="padding:8px">Name</th>
        <th style="padding:8px">Brand</th>
        <th style="padding:8px">Category</th>
        <th style="padding:8px">Price</th>
        <th style="padding:8px">Action</th>
      </tr>
      ${list.map(p=>`
        <tr style="border-bottom:1px solid #ddd">
          <td style="padding:8px">${p.name}</td>
          <td style="padding:8px">${p.brand}</td>
          <td style="padding:8px">${p.category}</td>
          <td style="padding:8px">Rs. ${p.price}</td>
          <td style="padding:8px"><button class="add-to-cart" onclick="addToCart(${p.id})">Add</button></td>
        </tr>`).join("")}
    </table>`;
  }else{
    grid.classList.remove("list-view");
    grid.innerHTML=list.map(p=>`
      <div class="product-card">
        <img src="${p.image}" class="product-image" alt="${p.name}">
        <div class="product-info">
          <h3 class="product-title">${p.name}</h3>
          <p class="product-description">${p.description}</p>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="product-price">Rs. ${p.price}</div>
            <button class="add-to-cart" onclick="addToCart(${p.id})">Add to Cart</button>
          </div>
        </div>
      </div>`).join("");
  }
}
function renderCart(){
  if(cart.length===0){
    cartItems.innerHTML="Your cart is empty";
    cartTotal.innerText="Rs. 0.00";
    cartIcon.style.display="none";
    cartCount.innerText="0";
    return;
  }
  cartIcon.style.display="inline-block";
  cartCount.innerText=cart.reduce((a,c)=>a+c.qty,0);
  cartItems.innerHTML=cart.map(item=>`
    <div class="cart-item">
      <div style="flex:1">${item.name}</div>
      <div class="qty-controls">
        <button class="qty-btn" onclick="changeQty(${item.id},-1)">-</button>
        <span>${item.qty}</span>
        <button class="qty-btn" onclick="changeQty(${item.id},1)">+</button>
      </div>
      <div>Rs. ${(item.price*item.qty).toFixed(2)}</div>
      <button class="delete-btn" onclick="removeFromCart(${item.id})"><i class="fas fa-trash"></i></button>
    </div>`).join("");
  const total=cart.reduce((a,c)=>a+c.price*c.qty,0);
  cartTotal.innerText="Rs. "+total.toFixed(2);
}

/* ===== Functions ===== */
function addToCart(id){
  const prod=products.find(p=>p.id===id);
  if(!prod)return;
  const found=cart.find(c=>c.id===id);
  if(found)found.qty++; else cart.push({...prod,qty:1});
  renderCart();
}
function changeQty(id,delta){
  const item=cart.find(c=>c.id===id);
  if(!item)return;
  item.qty+=delta;
  if(item.qty<=0) cart=cart.filter(c=>c.id!==id);
  renderCart();
}
function removeFromCart(id){
  cart=cart.filter(c=>c.id!==id);
  renderCart();
}
document.getElementById("checkoutBtn").onclick=()=>{
  if(cart.length===0)return alert("Cart is empty!");
  const msg=cart.map(c=>`${c.name} x${c.qty} = Rs.${c.price*c.qty}`).join("%0A");
  const total=cart.reduce((a,c)=>a+c.price*c.qty,0);
  const url=`https://wa.me/923332200318?text=🛍%20Order%20Details:%0A${msg}%0A%0ATotal:%20Rs.${total}`;
  window.open(url,"_blank");
}

/* ===== Event Listeners ===== */
brandsContainer.addEventListener("click",e=>{
  if(!e.target.matches(".brand-btn"))return;
  currentBrand=e.target.dataset.brand;
  currentCategory="All";
  renderBrands();renderCategories();renderProducts();
});
categoriesContainer.addEventListener("click",e=>{
  if(!e.target.matches(".category-btn"))return;
  currentCategory=e.target.dataset.cat;
  renderCategories();renderProducts();
});
searchBox.addEventListener("input",()=>renderProducts());

document.getElementById("viewBtn").onclick=()=>{
  isList=!isList;
  document.getElementById("viewBtn").innerHTML=isList?'<i class="fas fa-border-all"></i>':'<i class="fas fa-list"></i>';
  renderProducts();
};
document.getElementById("themeBtn").onclick=()=>{
  document.body.classList.toggle("dark");
};
cartIcon.onclick=()=>{
  cartSection.scrollIntoView({behavior:"smooth"});
};

/* ===== Initialize ===== */
renderBrands();
renderCategories();
renderProducts();
renderCart();
</script>
</body>
</html>
